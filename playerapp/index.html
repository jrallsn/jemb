<html>
<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/1.11.8/semantic.min.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/1.11.8/semantic.min.js"></script>

  <style>
  </style>

</head>
<body>
  <script type="text/javascript">
    
    var ws = new WebSocket("wss://echo.websocket.org");
  
    ws.onopen = function(evt) { onOpen(evt) };
    ws.onclose = function(evt) { onClose(evt) };
    ws.onmessage = function(evt) { onMessage(evt) };
    ws.onerror = function(evt) { onError(evt) };

    ws.onopen = function(event) {
      console.log('opened socket');
      onOpen(event);
    };

    function onOpen(evt) {
      /* var message = {
        action: 'joinSurveySubject'
      }
      */
      var message = {
        state: 'ask',
        remainingTime: 5,
        prompt: 'What do you put on your feet?'
      };
      ws.send(JSON.stringify(message));
    }

    ws.onmessage = function(event){
      console.log(JSON.stringify(event.data));
      var data = JSON.parse(event.data);
      if (data.prompt) {
        var html = '';
        html = '<h1>' + data.prompt + '</h1>';
        document.getElementById('question').innerHTML = html;
      }
    };

    function submitAnswer() {
      alert('argh');
    }

    $('form').form({
        on: 'blur',
        fields: {
            name: {
                identifier: 'answer',
                rules: [{
                    type: 'empty',
                    prompt: 'Please enter a value'
                }]
            }
        }
    });

  </script>

  <div id="question"></div>

  <form class="ui form">
    <div class="field">
      <input placeholder="One word, maximum 16 characters" name="answer" type="text">
    </div>

    <div class="ui primary submit button">Submit</div>
    <div class="ui error message"></div>
  </form>
        
</body>
</html>